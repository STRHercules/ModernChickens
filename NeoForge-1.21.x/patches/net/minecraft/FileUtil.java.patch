--- a/net/minecraft/FileUtil.java
+++ b/net/minecraft/FileUtil.java
@@ -19,6 +_,7 @@
     private static final Pattern COPY_COUNTER_PATTERN = Pattern.compile("(<name>.*) \\((<count>\\d*)\\)", 66);
     private static final int MAX_FILE_NAME = 255;
     private static final Pattern RESERVED_WINDOWS_FILENAMES = Pattern.compile(".*\\.|(?:COM|CLOCK\\$|CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])(?:\\..*)?", 2);
+    private static final Pattern RESERVED_WINDOWS_FILENAMES_NEOFORGE = Pattern.compile(".*\\.|(?:CON|PRN|AUX|NUL|CLOCK\\$|CONIN\\$|CONOUT\\$|(?:COM|LPT)[¹²³0-9])(?:\\..*)?", 2); // Neo: Fix MC-268617 - See PR #767
     private static final Pattern STRICT_PATH_SEGMENT_CHECK = Pattern.compile("[-._a-z0-9]+");
 
     public static String sanitizeName(String p_352262_) {
@@ -87,7 +_,7 @@
     }
 
     public static boolean isPathPartPortable(String p_428321_) {
-        return !RESERVED_WINDOWS_FILENAMES.matcher(p_428321_).matches();
+        return !(net.neoforged.neoforge.common.NeoForgeMod.getProperFilenameValidation() ? RESERVED_WINDOWS_FILENAMES_NEOFORGE : RESERVED_WINDOWS_FILENAMES).matcher(p_428321_).matches();
     }
 
     public static Path createPathToResource(Path p_133737_, String p_133738_, String p_133739_) {
